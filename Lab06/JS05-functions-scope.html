<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS05: Functions & Scope - Lab06 JavaScript Fundamentals</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #f7df1e;
            --secondary: #323330;
            --accent: #f0db4f;
            --text-dark: #2d2d2d;
            --text-light: #666;
            --bg-light: #fafafa;
            --border: #e0e0e0;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --info: #2196f3;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #f7f9fc 0%, #f1f5f9 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }

        .lesson-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            border-radius: 15px;
            color: white;
        }

        .lesson-header h1 {
            font-size: clamp(2rem, 4vw, 3rem);
            margin-bottom: 10px;
        }

        .lesson-header .lesson-number {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 15px;
            display: inline-block;
        }

        .section {
            margin: 40px 0;
            padding: 30px;
            background: var(--bg-light);
            border-radius: 15px;
            border-left: 5px solid var(--primary);
        }

        .section h2 {
            color: var(--text-dark);
            margin-bottom: 20px;
            font-size: clamp(1.3rem, 3vw, 1.8rem);
        }

        .section h3 {
            color: var(--secondary);
            margin: 25px 0 15px 0;
            font-size: 1.2rem;
        }

        .code-demo {
            background: var(--secondary);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
        }

        .code-demo::before {
            content: "JavaScript";
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 0.7rem;
            color: var(--primary);
            opacity: 0.7;
        }

        .code-demo pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
        }

        .code-comment {
            color: #68d391;
        }

        .code-string {
            color: #faf089;
        }

        .code-keyword {
            color: #63b3ed;
        }

        .code-number {
            color: #f6ad55;
        }

        .interactive-demo {
            background: white;
            border: 2px solid var(--info);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .demo-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            margin: 10px 0;
        }

        .demo-button {
            background: var(--primary);
            color: var(--secondary);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .demo-button:hover {
            background: var(--accent);
            transform: translateY(-2px);
        }

        .demo-output {
            background: var(--secondary);
            color: var(--primary);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            min-height: 50px;
            border: 2px solid var(--primary);
            white-space: pre-wrap;
        }

        .scope-diagram {
            background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
            border: 2px solid var(--success);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .scope-level {
            background: white;
            border: 2px solid var(--success);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            position: relative;
        }

        .scope-level h4 {
            color: var(--success);
            margin-bottom: 10px;
        }

        .function-builder {
            background: linear-gradient(135deg, #e3f2fd, #f0f8ff);
            border: 2px solid var(--info);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }

        .function-parts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .function-part {
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .function-part h5 {
            color: var(--info);
            margin-bottom: 10px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid var(--border);
        }

        .nav-btn {
            display: inline-block;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-btn.prev {
            background: #6c757d;
            color: white;
        }

        .nav-btn.next {
            background: var(--primary);
            color: var(--secondary);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .nav-center {
            text-align: center;
        }

        .nav-center a {
            color: var(--info);
            text-decoration: none;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
            
            .demo-grid,
            .function-parts {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="lesson-header">
            <div class="lesson-number">Lesson JS05</div>
            <h1>‚öôÔ∏è Functions & Scope</h1>
            <p>Learn to create reusable code blocks and understand variable scope</p>
        </div>

        <!-- Function Basics -->
        <section class="section">
            <h2>üîß What are Functions?</h2>
            
            <p><strong>Functions</strong> are reusable blocks of code that perform specific tasks. They help organize code, avoid repetition, v√† make programs more modular.</p>

            <div class="function-builder">
                <h3>üèóÔ∏è Function Anatomy</h3>
                <div class="function-parts">
                    <div class="function-part">
                        <h5>Keyword</h5>
                        <code>function</code>
                    </div>
                    <div class="function-part">
                        <h5>Name</h5>
                        <code>myFunction</code>
                    </div>
                    <div class="function-part">
                        <h5>Parameters</h5>
                        <code>(param1, param2)</code>
                    </div>
                    <div class="function-part">
                        <h5>Body</h5>
                        <code>{ /* code */ }</code>
                    </div>
                    <div class="function-part">
                        <h5>Return</h5>
                        <code>return value;</code>
                    </div>
                </div>
            </div>

            <h3>Function Declaration</h3>
            <div class="code-demo">
                <pre><code><span class="code-comment">// Basic function declaration</span>
<span class="code-keyword">function</span> <span class="code-keyword">greet</span>() {
    <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-string">"Hello, World!"</span>);
}

<span class="code-comment">// Calling the function</span>
<span class="code-keyword">greet</span>(); <span class="code-comment">// Output: Hello, World!</span>

<span class="code-comment">// Function with parameters</span>
<span class="code-keyword">function</span> <span class="code-keyword">greetPerson</span>(name) {
    <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-string">`Hello, ${name}!`</span>);
}

<span class="code-keyword">greetPerson</span>(<span class="code-string">"Alice"</span>); <span class="code-comment">// Output: Hello, Alice!</span>

<span class="code-comment">// Function with return value</span>
<span class="code-keyword">function</span> <span class="code-keyword">add</span>(a, b) {
    <span class="code-keyword">return</span> a + b;
}

<span class="code-keyword">let</span> result = <span class="code-keyword">add</span>(<span class="code-number">5</span>, <span class="code-number">3</span>);
<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(result); <span class="code-comment">// Output: 8</span></code></pre>
            </div>

            <h3>Function Expressions</h3>
            <div class="code-demo">
                <pre><code><span class="code-comment">// Function expression</span>
<span class="code-keyword">const</span> multiply = <span class="code-keyword">function</span>(x, y) {
    <span class="code-keyword">return</span> x * y;
};

<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">multiply</span>(<span class="code-number">4</span>, <span class="code-number">5</span>)); <span class="code-comment">// Output: 20</span>

<span class="code-comment">// Arrow function (ES6)</span>
<span class="code-keyword">const</span> divide = (a, b) => {
    <span class="code-keyword">return</span> a / b;
};

<span class="code-comment">// Short arrow function</span>
<span class="code-keyword">const</span> square = x => x * x;

<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">square</span>(<span class="code-number">6</span>)); <span class="code-comment">// Output: 36</span></code></pre>
            </div>
        </section>

        <!-- Function Parameters -->
        <section class="section">
            <h2>üìã Parameters & Arguments</h2>
            
            <div class="code-demo">
                <pre><code><span class="code-comment">// Multiple parameters</span>
<span class="code-keyword">function</span> <span class="code-keyword">calculateArea</span>(length, width) {
    <span class="code-keyword">return</span> length * width;
}

<span class="code-comment">// Default parameters</span>
<span class="code-keyword">function</span> <span class="code-keyword">greetWithDefault</span>(name = <span class="code-string">"Guest"</span>) {
    <span class="code-keyword">return</span> <span class="code-string">`Hello, ${name}!`</span>;
}

<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">greetWithDefault</span>()); <span class="code-comment">// Hello, Guest!</span>
<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">greetWithDefault</span>(<span class="code-string">"Bob"</span>)); <span class="code-comment">// Hello, Bob!</span>

<span class="code-comment">// Rest parameters</span>
<span class="code-keyword">function</span> <span class="code-keyword">sum</span>(...numbers) {
    <span class="code-keyword">let</span> total = <span class="code-number">0</span>;
    <span class="code-keyword">for</span> (<span class="code-keyword">let</span> num <span class="code-keyword">of</span> numbers) {
        total += num;
    }
    <span class="code-keyword">return</span> total;
}

<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">sum</span>(<span class="code-number">1, 2, 3, 4, 5</span>)); <span class="code-comment">// Output: 15</span></code></pre>
            </div>
        </section>

        <!-- Scope -->
        <section class="section">
            <h2>üéØ Variable Scope</h2>
            
            <p><strong>Scope</strong> determines where variables can be accessed trong your code. JavaScript c√≥ several types of scope:</p>

            <div class="scope-diagram">
                <h3>üåê Scope Hierarchy</h3>
                
                <div class="scope-level">
                    <h4>Global Scope</h4>
                    <p>Variables accessible everywhere in the program</p>
                    <div class="code-demo">
                        <pre><code><span class="code-keyword">var</span> globalVar = <span class="code-string">"I'm global!"</span>;
<span class="code-keyword">function</span> <span class="code-keyword">anyFunction</span>() {
    <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(globalVar); <span class="code-comment">// Accessible here</span>
}</code></pre>
                    </div>
                </div>
                
                <div class="scope-level">
                    <h4>Function Scope</h4>
                    <p>Variables accessible only within the function</p>
                    <div class="code-demo">
                        <pre><code><span class="code-keyword">function</span> <span class="code-keyword">myFunction</span>() {
    <span class="code-keyword">var</span> functionScoped = <span class="code-string">"Only in function"</span>;
    <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(functionScoped); <span class="code-comment">// Works here</span>
}
<span class="code-comment">// console.log(functionScoped); // Error!</span></code></pre>
                    </div>
                </div>
                
                <div class="scope-level">
                    <h4>Block Scope</h4>
                    <p>Variables accessible only within the block (let, const)</p>
                    <div class="code-demo">
                        <pre><code><span class="code-keyword">if</span> (<span class="code-keyword">true</span>) {
    <span class="code-keyword">let</span> blockScoped = <span class="code-string">"Only in block"</span>;
    <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(blockScoped); <span class="code-comment">// Works here</span>
}
<span class="code-comment">// console.log(blockScoped); // Error!</span></code></pre>
                    </div>
                </div>
            </div>

            <h3>Scope Examples</h3>
            <div class="code-demo">
                <pre><code><span class="code-comment">// Global scope</span>
<span class="code-keyword">let</span> globalMessage = <span class="code-string">"Global"</span>;

<span class="code-keyword">function</span> <span class="code-keyword">outerFunction</span>() {
    <span class="code-comment">// Function scope</span>
    <span class="code-keyword">let</span> outerVariable = <span class="code-string">"Outer"</span>;
    
    <span class="code-keyword">function</span> <span class="code-keyword">innerFunction</span>() {
        <span class="code-comment">// Nested function scope</span>
        <span class="code-keyword">let</span> innerVariable = <span class="code-string">"Inner"</span>;
        
        <span class="code-comment">// Can access all: global, outer, and inner</span>
        <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(globalMessage); <span class="code-comment">// "Global"</span>
        <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(outerVariable);  <span class="code-comment">// "Outer"</span>
        <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(innerVariable);  <span class="code-comment">// "Inner"</span>
    }
    
    <span class="code-keyword">innerFunction</span>();
    <span class="code-comment">// console.log(innerVariable); // Error! Not accessible</span>
}

<span class="code-keyword">outerFunction</span>();</code></pre>
            </div>
        </section>

        <!-- Interactive Demos -->
        <section class="section">
            <h2>üéÆ Interactive Function Lab</h2>
            
            <div class="demo-grid">
                <div class="interactive-demo">
                    <h4>üßÆ Function Calculator</h4>
                    <p>Build custom calculator functions:</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <input type="number" id="calc1" class="demo-input" placeholder="Number 1" value="10">
                        <input type="number" id="calc2" class="demo-input" placeholder="Number 2" value="5">
                    </div>
                    
                    <div>
                        <button class="demo-button" onclick="runCalculation('add')">Add</button>
                        <button class="demo-button" onclick="runCalculation('multiply')">Multiply</button>
                        <button class="demo-button" onclick="runCalculation('power')">Power</button>
                        <button class="demo-button" onclick="runCalculation('max')">Max</button>
                    </div>
                    
                    <div id="calcFunctionOutput" class="demo-output">
                        Function results will appear here...
                    </div>
                </div>

                <div class="interactive-demo">
                    <h4>üé≤ Random Function Generator</h4>
                    <p>Practice with different function types:</p>
                    
                    <input type="text" id="functionName" class="demo-input" placeholder="Function name" value="myFunction">
                    
                    <div>
                        <button class="demo-button" onclick="generateFunction('greeting')">Greeting Function</button>
                        <button class="demo-button" onclick="generateFunction('math')">Math Function</button>
                        <button class="demo-button" onclick="generateFunction('array')">Array Function</button>
                    </div>
                    
                    <div id="functionOutput" class="demo-output">
                        Generated function will appear here...
                    </div>
                </div>
            </div>

            <div class="interactive-demo">
                <h4>üîç Scope Explorer</h4>
                <p>Understand variable scope with interactive examples:</p>
                
                <input type="text" id="scopeVar" class="demo-input" placeholder="Variable name" value="myVariable">
                <input type="text" id="scopeValue" class="demo-input" placeholder="Variable value" value="'Hello'">
                
                <div>
                    <button class="demo-button" onclick="testScope('global')">Global Scope</button>
                    <button class="demo-button" onclick="testScope('function')">Function Scope</button>
                    <button class="demo-button" onclick="testScope('block')">Block Scope</button>
                </div>
                
                <div id="scopeOutput" class="demo-output">
                    Scope test results will appear here...
                </div>
            </div>
        </section>

        <!-- Advanced Functions -->
        <section class="section">
            <h2>üöÄ Advanced Function Concepts</h2>
            
            <h3>Higher-Order Functions</h3>
            <div class="code-demo">
                <pre><code><span class="code-comment">// Function that takes another function as parameter</span>
<span class="code-keyword">function</span> <span class="code-keyword">processArray</span>(arr, callback) {
    <span class="code-keyword">let</span> result = [];
    <span class="code-keyword">for</span> (<span class="code-keyword">let</span> item <span class="code-keyword">of</span> arr) {
        result.<span class="code-keyword">push</span>(<span class="code-keyword">callback</span>(item));
    }
    <span class="code-keyword">return</span> result;
}

<span class="code-comment">// Callback functions</span>
<span class="code-keyword">const</span> double = x => x * <span class="code-number">2</span>;
<span class="code-keyword">const</span> addOne = x => x + <span class="code-number">1</span>;

<span class="code-keyword">let</span> numbers = [<span class="code-number">1, 2, 3, 4, 5</span>];
<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">processArray</span>(numbers, double)); <span class="code-comment">// [2, 4, 6, 8, 10]</span>
<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">processArray</span>(numbers, addOne)); <span class="code-comment">// [2, 3, 4, 5, 6]</span></code></pre>
            </div>

            <h3>Closures</h3>
            <div class="code-demo">
                <pre><code><span class="code-comment">// Closure - inner function has access to outer function's variables</span>
<span class="code-keyword">function</span> <span class="code-keyword">createCounter</span>() {
    <span class="code-keyword">let</span> count = <span class="code-number">0</span>; <span class="code-comment">// Private variable</span>
    
    <span class="code-keyword">return</span> <span class="code-keyword">function</span>() {
        count++; <span class="code-comment">// Can access outer variable</span>
        <span class="code-keyword">return</span> count;
    };
}

<span class="code-keyword">const</span> counter1 = <span class="code-keyword">createCounter</span>();
<span class="code-keyword">const</span> counter2 = <span class="code-keyword">createCounter</span>();

<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">counter1</span>()); <span class="code-comment">// 1</span>
<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">counter1</span>()); <span class="code-comment">// 2</span>
<span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-keyword">counter2</span>()); <span class="code-comment">// 1 (separate counter)</span></code></pre>
            </div>

            <h3>IIFE (Immediately Invoked Function Expression)</h3>
            <div class="code-demo">
                <pre><code><span class="code-comment">// IIFE - function that runs immediately</span>
(<span class="code-keyword">function</span>() {
    <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-string">"This function runs immediately!"</span>);
})();

<span class="code-comment">// IIFE with parameters</span>
(<span class="code-keyword">function</span>(name) {
    <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-string">`Hello, ${name}!`</span>);
})(<span class="code-string">"World"</span>);

<span class="code-comment">// Arrow function IIFE</span>
(() => {
    <span class="code-keyword">console</span>.<span class="code-keyword">log</span>(<span class="code-string">"Arrow IIFE!"</span>);
})();</code></pre>
            </div>
        </section>

        <!-- Navigation -->
        <div class="navigation">
            <a href="JS04-conditionals-loops.html" class="nav-btn prev">‚Üê JS04: Conditionals & Loops</a>
            
            <div class="nav-center">
                <a href="index.html">üìö Course Overview</a>
            </div>
            
            <a href="JS06-arrays-objects.html" class="nav-btn next">JS06: Arrays & Objects ‚Üí</a>
        </div>
    </div>

    <script>
        // Calculator functions
        const calculatorFunctions = {
            add: (a, b) => a + b,
            multiply: (a, b) => a * b,
            power: (a, b) => Math.pow(a, b),
            max: (a, b) => Math.max(a, b)
        };

        function runCalculation(operation) {
            const num1 = parseFloat(document.getElementById('calc1').value);
            const num2 = parseFloat(document.getElementById('calc2').value);
            const output = document.getElementById('calcFunctionOutput');
            
            if (isNaN(num1) || isNaN(num2)) {
                output.textContent = 'Please enter valid numbers!';
                return;
            }
            
            const result = calculatorFunctions[operation](num1, num2);
            
            let explanation = `Function: ${operation}(${num1}, ${num2})\n`;
            explanation += `Result: ${result}\n\n`;
            explanation += `Function definition:\n`;
            explanation += `const ${operation} = (a, b) => ${calculatorFunctions[operation].toString().split('=>')[1]};\n\n`;
            explanation += `How it works:\n`;
            explanation += `1. Function receives two parameters: a=${num1}, b=${num2}\n`;
            explanation += `2. Performs ${operation} operation\n`;
            explanation += `3. Returns result: ${result}`;
            
            output.textContent = explanation;
        }

        // Function generator
        function generateFunction(type) {
            const functionName = document.getElementById('functionName').value || 'myFunction';
            const output = document.getElementById('functionOutput');
            
            let functionCode = '';
            let explanation = '';
            
            switch (type) {
                case 'greeting':
                    functionCode = `function ${functionName}(name = "Guest") {
    return \`Hello, \${name}! Welcome to JavaScript!\`;
}

// Usage:
console.log(${functionName}());           // Hello, Guest! Welcome to JavaScript!
console.log(${functionName}("Alice"));   // Hello, Alice! Welcome to JavaScript!`;
                    explanation = 'This function creates personalized greetings with default parameters.';
                    break;
                    
                case 'math':
                    functionCode = `function ${functionName}(numbers) {
    if (!Array.isArray(numbers) || numbers.length === 0) {
        return { error: "Please provide an array of numbers" };
    }
    
    const sum = numbers.reduce((acc, num) => acc + num, 0);
    const average = sum / numbers.length;
    const max = Math.max(...numbers);
    const min = Math.min(...numbers);
    
    return { sum, average, max, min };
}

// Usage:
console.log(${functionName}([1, 2, 3, 4, 5]));`;
                    explanation = 'This function performs statistical calculations on an array of numbers.';
                    break;
                    
                case 'array':
                    functionCode = `function ${functionName}(arr, operation) {
    switch (operation) {
        case 'reverse':
            return [...arr].reverse();
        case 'unique':
            return [...new Set(arr)];
        case 'sort':
            return [...arr].sort();
        case 'shuffle':
            const shuffled = [...arr];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        default:
            return arr;
    }
}

// Usage:
console.log(${functionName}([1, 2, 3, 2, 4], 'unique')); // [1, 2, 3, 4]`;
                    explanation = 'This function performs various operations on arrays.';
                    break;
            }
            
            output.textContent = `Generated Function: ${functionName}\n\n${functionCode}\n\nExplanation:\n${explanation}`;
        }

        // Scope tester
        function testScope(scopeType) {
            const varName = document.getElementById('scopeVar').value || 'myVariable';
            const varValue = document.getElementById('scopeValue').value || "'Hello'";
            const output = document.getElementById('scopeOutput');
            
            let scopeCode = '';
            let explanation = '';
            
            switch (scopeType) {
                case 'global':
                    scopeCode = `// Global Scope
let ${varName} = ${varValue}; // Global variable

function testFunction() {
    console.log(${varName}); // Accessible from anywhere
}

function anotherFunction() {
    console.log(${varName}); // Also accessible here
}

testFunction();      // Works!
anotherFunction();   // Works!
console.log(${varName}); // Works from global scope too`;
                    explanation = 'Global variables are accessible from anywhere in the program.';
                    break;
                    
                case 'function':
                    scopeCode = `// Function Scope
function testFunction() {
    let ${varName} = ${varValue}; // Function-scoped variable
    console.log(${varName}); // Accessible within function
    
    function nestedFunction() {
        console.log(${varName}); // Accessible in nested function
    }
    
    nestedFunction(); // Works!
}

testFunction(); // Works!
// console.log(${varName}); // Error! Not accessible outside function`;
                    explanation = 'Function-scoped variables are only accessible within the function and its nested functions.';
                    break;
                    
                case 'block':
                    scopeCode = `// Block Scope
if (true) {
    let ${varName} = ${varValue}; // Block-scoped variable
    console.log(${varName}); // Accessible within block
}

for (let i = 0; i < 1; i++) {
    let ${varName}2 = ${varValue}; // Block-scoped in loop
    console.log(${varName}2); // Accessible within loop block
}

// console.log(${varName});  // Error! Not accessible outside block
// console.log(${varName}2); // Error! Not accessible outside loop`;
                    explanation = 'Block-scoped variables (let, const) are only accessible within the block {...} where they are defined.';
                    break;
            }
            
            output.textContent = `Scope Type: ${scopeType.toUpperCase()}\n\n${scopeCode}\n\nExplanation:\n${explanation}`;
        }

        // Welcome message
        console.log('‚öôÔ∏è Welcome to JS05: Functions & Scope!');
        console.log('üîß Practice creating your own functions!');

        // Demonstrate functions in console
        console.log('üéØ Function Examples:');
        
        function demoFunction(name) {
            return `Hello from ${name}!`;
        }
        
        const arrowDemo = (x) => x * 2;
        
        console.log('Regular function:', demoFunction('JS05'));
        console.log('Arrow function:', arrowDemo(5));

        // Scope demonstration
        let globalVar = 'I am global!';
        
        function scopeDemo() {
            let functionVar = 'I am function-scoped!';
            console.log('From function:', globalVar, functionVar);
            
            if (true) {
                let blockVar = 'I am block-scoped!';
                console.log('From block:', globalVar, functionVar, blockVar);
            }
        }
        
        scopeDemo();

        // Mark lesson as started
        localStorage.setItem('js05_started', Date.now());
        localStorage.setItem('js_progress_js05', 'true');
    </script>
</body>
</html>
